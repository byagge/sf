<!-- Shared mobile bottom navigation -->
<div x-data="{showMoreMenu:false, currentPath: window.location.pathname}" x-init="$nextTick(() => { if(window.lucide) lucide.createIcons(); })" class="relative">
	<nav class="mobile-nav fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 flex justify-around items-center h-14 z-40">
		<a href="/dashboard/" class="flex flex-col items-center" :class="currentPath === '/dashboard/' ? 'text-blue-600' : 'text-gray-500'">
			<i data-lucide="home" class="w-5 h-5"></i>
			<span class="text-xs">Главная</span>
		</a>
		<a href="/clients/" class="flex flex-col items-center" :class="currentPath === '/clients/' ? 'text-blue-600' : 'text-gray-500'">
			<i data-lucide="user" class="w-5 h-5"></i>
			<span class="text-xs">Клиенты</span>
		</a>
		<a href="/orders/?create=1/" class="flex flex-col items-center justify-center w-12 h-12 bg-blue-600 rounded-full -mt-4 shadow-lg">
			<i data-lucide="plus" class="w-6 h-6 text-white"></i>
		</a>
		<a href="/inventory/" class="flex flex-col items-center" :class="currentPath === '/inventory/' ? 'text-blue-600' : 'text-gray-500'">
			<i data-lucide="archive" class="w-5 h-5"></i>
			<span class="text-xs">Склад</span>
		</a>
		<a href="/menu/" class="flex flex-col items-center" :class="currentPath === '/menu/' ? 'text-blue-600' : 'text-gray-500'">
			<i data-lucide="menu" class="w-5 h-5"></i>
			<span class="text-xs">Другое</span>
		</a>
	</nav>
</div>


<!-- Ensure Alpine.js and Lucide are loaded (fallback) -->
<script>
(function() {
	function loadScript(src) {
		return new Promise(function(resolve) {
			const s = document.createElement('script');
			s.src = src;
			s.defer = true;
			s.onload = resolve;
			document.head.appendChild(s);
		});
	}
	async function ensureLibs() {
		if (!window.Alpine) {
			await loadScript('https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js');
		}
		if (!window.lucide) {
			await loadScript('https://unpkg.com/lucide@latest/dist/umd/lucide.min.js');
		}
		document.addEventListener('alpine:init', () => {
			if (window.lucide) window.lucide.createIcons();
		});
		if (window.lucide) window.lucide.createIcons();
		if (window.Alpine && !window.Alpine.initialized) window.Alpine.start();
	}
	ensureLibs();
})();
</script>
