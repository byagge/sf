{% extends 'finance/base.html' %}
{% block title %}Финансовые периоды{% endblock %}
{% block content %}
<div class="container mx-auto px-4 py-6">
	<div class="flex items-center justify-between mb-6">
		<h1 class="text-2xl font-bold text-gray-900">Финансовые периоды</h1>
		<a href="{% url 'finance:financial_period_create' %}" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded">Новый период</a>
	</div>
	<div class="bg-white border border-gray-200 rounded-lg overflow-hidden">
		<div class="overflow-x-auto">
			<table class="min-w-full divide-y divide-gray-200">
				<thead class="bg-gray-50">
					<tr>
						<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Название</th>
						<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Тип</th>
						<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Начало</th>
						<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Окончание</th>
						<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Статус</th>
						<th class="px-6 py-3"></th>
					</tr>
				</thead>
				<tbody class="bg-white divide-y divide-gray-100">
					{% for p in periods %}
					<tr>
						<td class="px-6 py-3 text-sm text-gray-900">{{ p.name }}</td>
						<td class="px-6 py-3 text-sm text-gray-900">{{ p.get_period_type_display }}</td>
						<td class="px-6 py-3 text-sm text-gray-900">{{ p.start_date }}</td>
						<td class="px-6 py-3 text-sm text-gray-900">{{ p.end_date }}</td>
						<td class="px-6 py-3 text-sm">
							<span class="px-2 py-1 rounded text-xs {% if p.is_closed %}bg-gray-200 text-gray-700{% else %}bg-green-100 text-green-800{% endif %}">
								{% if p.is_closed %}Закрыт{% else %}Открыт{% endif %}
							</span>
						</td>
						<td class="px-6 py-3 text-right text-sm">
							{% if not p.is_closed %}
							<form method="post" action="{% url 'finance:financial_period_close' p.pk %}">
								{% csrf_token %}
								<button class="px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded">Закрыть</button>
							</form>
							{% endif %}
						</td>
					</tr>
					{% empty %}
					<tr>
						<td colspan="6" class="px-6 py-8 text-center text-gray-500">Нет финансовых периодов</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	</div>
</div>
{% endblock %} 