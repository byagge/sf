# Система управления для мастера цеха

## Обзор

Система предоставляет мастерам цехов комплексный инструмент для управления и мониторинга всех своих цехов. Мастер может просматривать общую статистику по всем цехам, детальную информацию по каждому цеху, а также управлять производственными процессами.

## Функциональность

### 1. Панель мастера (`/workshops/master/`)
- **Общая статистика**: Количество цехов, сотрудников, активных заказов и задач
- **Производственные показатели**: Количество произведенной продукции, брак, качество за 30 дней
- **График производительности**: Визуализация показателей по дням недели
- **Список цехов**: Карточки всех цехов с основной информацией

### 2. Страница "Цеха" (`/workshops/master/workshops/`)
- **Детальный обзор**: Подробная информация по каждому цеху мастера
- **Статистика цехов**: Количество сотрудников, задач, заказов и загрузка
- **Индикаторы загрузки**: Визуальные показатели загруженности каждого цеха
- **Модальные окна**: Детальная информация по цеху с возможностью просмотра

### 3. Мобильная панель (`workshop_mobile.html`)
- **Общий overview**: Краткая статистика по всем цехам мастера
- **Список цехов**: Компактное отображение с ключевыми метриками
- **Быстрые действия**: Ссылки на основные разделы системы
- **Адаптивный дизайн**: Оптимизировано для мобильных устройств

## API Endpoints

### Для мастера
- `GET /workshops/api/master/workshops/` - Список всех цехов мастера
- `GET /workshops/api/master/overview/` - Общая статистика по всем цехам
- `GET /workshops/api/master/workshop/{id}/stats/` - Детальная статистика по цеху

### Существующие
- `GET /workshops/api/workshops/` - Список всех цехов
- `GET /workshops/api/workshops/{id}/orders/` - Заказы в конкретном цехе
- `GET /workshops/api/workshops/orders/` - Заказы во всех цехах

## Навигация

### Основные страницы
1. **Дашборд** (`/workshops/master/`) - Общий обзор и статистика
2. **Цеха** (`/workshops/master/workshops/`) - Детальная информация по цехам
3. **Мобильная версия** - Адаптированная для мобильных устройств

### Кнопки навигации
- **Дашборд** - Переход к общей панели управления
- **Цеха** - Переход к детальному списку цехов
- **Заказы** - Просмотр заказов в цехах (на странице цехов)

## Структура данных

### Общая статистика мастера
```json
{
  "total_workshops": 3,
  "total_employees": 25,
  "total_active_tasks": 15,
  "total_active_orders": 8,
  "products_made_30_days": 150,
  "defective_products_30_days": 5,
  "tasks_per_day": 5.0,
  "quality_rate": 96.7
}
```

### Информация о цехе
```json
{
  "id": 1,
  "name": "Цех сборки",
  "description": "Сборка электронных устройств",
  "employees_count": 12,
  "active_tasks": 8,
  "active_orders": 3,
  "is_main_manager": true
}
```

### Детальная статистика цеха
```json
{
  "workshop": {
    "id": 1,
    "name": "Цех сборки",
    "employees_count": 12,
    "active_orders": 3,
    "products_made_30_days": 75,
    "quality_rate": 98.5
  },
  "employees": [...],
  "orders": [...]
}
```

## Безопасность

- Доступ только для пользователей с ролью `master`
- Проверка прав доступа к конкретному цеху
- Автоматическое определение цехов мастера (главный + дополнительные)

## Использование

### Для мастера
1. **Дашборд** (`/workshops/master/`) - Общий обзор всех цехов
2. **Цеха** (`/workshops/master/workshops/`) - Детальная информация по каждому цеху
3. **Мобильная версия** - Быстрый доступ на мобильных устройствах

### Навигация между страницами
- Кнопка "Цеха" на дашборде ведет к детальному списку
- Кнопка "Дашборд" на странице цехов возвращает к обзору
- Мобильная версия предоставляет быстрый доступ ко всем разделам

## Технологии

- **Backend**: Django REST Framework
- **Frontend**: Alpine.js, Tailwind CSS
- **Иконки**: Lucide Icons
- **Графики**: Chart.js (для десктопной версии)
- **Адаптивность**: Автоматическое определение мобильных устройств

## Расширение функциональности

### Возможные улучшения
1. **Уведомления**: Оповещения о критических ситуациях
2. **Планирование**: Создание и управление производственными планами
3. **Аналитика**: Детальные отчеты и тренды
4. **Интеграция**: Связь с другими системами предприятия

### Добавление новых метрик
1. Создать новый API endpoint в `views.py`
2. Добавить URL в `urls.py`
3. Обновить соответствующие шаблоны
4. Добавить валидацию и обработку ошибок

## Поддержка

При возникновении проблем или необходимости расширения функциональности:
1. Проверить логи Django
2. Убедиться в корректности прав доступа
3. Проверить соответствие данных в базе
4. Обратиться к документации Django REST Framework 