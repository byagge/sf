# Система управления для мастера цеха

## Обзор

Система предоставляет мастерам цехов комплексный инструмент для управления и мониторинга всех своих цехов. Мастер может просматривать общую статистику по всем цехам, детальную информацию по каждому цеху, а также управлять производственными процессами.

## Функциональность

### 1. Панель мастера (`/workshops/master/`)
- **Общая статистика**: Количество цехов, сотрудников, активных заказов и задач
- **Производственные показатели**: Количество произведенной продукции, брак, качество за 30 дней
- **График производительности**: Визуализация показателей по дням недели
- **Список цехов**: Карточки всех цехов с основной информацией

### 2. Детальная информация по цеху
- **Статистика цеха**: Количество сотрудников, заказов, произведенной продукции
- **Активные заказы**: Прогресс выполнения с визуальными индикаторами
- **Производительность сотрудников**: Детальная статистика по каждому работнику

### 3. Мобильная панель (`workshop_mobile.html`)
- **Быстрая статистика**: Ключевые показатели в компактном виде
- **Прогресс производства**: Текущие заказы с процентами выполнения
- **Топ сотрудников**: Лучшие работники по производительности
- **Быстрые действия**: Ссылки на основные разделы системы

## API Endpoints

### Для мастера
- `GET /workshops/api/master/workshops/` - Список всех цехов мастера
- `GET /workshops/api/master/overview/` - Общая статистика по всем цехам
- `GET /workshops/api/master/workshop/{id}/stats/` - Детальная статистика по цеху

### Существующие
- `GET /workshops/api/workshops/` - Список всех цехов
- `GET /workshops/api/workshops/{id}/orders/` - Заказы в конкретном цехе
- `GET /workshops/api/workshops/orders/` - Заказы во всех цехах

## Структура данных

### Общая статистика мастера
```json
{
  "total_workshops": 3,
  "total_employees": 25,
  "total_active_tasks": 15,
  "total_active_orders": 8,
  "products_made_30_days": 150,
  "defective_products_30_days": 5,
  "tasks_per_day": 5.0,
  "quality_rate": 96.7
}
```

### Информация о цехе
```json
{
  "id": 1,
  "name": "Цех сборки",
  "description": "Сборка электронных устройств",
  "employees_count": 12,
  "active_tasks": 8,
  "active_orders": 3,
  "is_main_manager": true
}
```

### Детальная статистика цеха
```json
{
  "workshop": {
    "id": 1,
    "name": "Цех сборки",
    "employees_count": 12,
    "active_orders": 3,
    "products_made_30_days": 75,
    "quality_rate": 98.5
  },
  "employees": [...],
  "orders": [...]
}
```

## Безопасность

- Доступ только для пользователей с ролью `master`
- Проверка прав доступа к конкретному цеху
- Автоматическое определение цехов мастера (главный + дополнительные)

## Использование

### Для мастера
1. Перейти на `/workshops/master/` для полной панели управления
2. Использовать мобильную версию для быстрого доступа
3. Кликать на карточки цехов для детальной информации

### Для разработчиков
1. Добавить новые API endpoints в `views.py`
2. Обновить URL конфигурацию в `urls.py`
3. Создать/обновить HTML шаблоны
4. Добавить необходимые сериализаторы

## Технологии

- **Backend**: Django REST Framework
- **Frontend**: Alpine.js, Tailwind CSS
- **Иконки**: Lucide Icons
- **Графики**: Chart.js (для десктопной версии)

## Расширение функциональности

### Возможные улучшения
1. **Уведомления**: Оповещения о критических ситуациях
2. **Планирование**: Создание и управление производственными планами
3. **Аналитика**: Детальные отчеты и тренды
4. **Интеграция**: Связь с другими системами предприятия

### Добавление новых метрик
1. Создать новый API endpoint в `views.py`
2. Добавить URL в `urls.py`
3. Обновить соответствующие шаблоны
4. Добавить валидацию и обработку ошибок

## Поддержка

При возникновении проблем или необходимости расширения функциональности:
1. Проверить логи Django
2. Убедиться в корректности прав доступа
3. Проверить соответствие данных в базе
4. Обратиться к документации Django REST Framework 