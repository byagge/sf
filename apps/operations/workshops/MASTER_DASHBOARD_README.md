# Дашборд мастера - Smart Factory

## Описание

Система дашборда мастера предоставляет подробную статистику по всем цехам, которыми управляет мастер. Включает в себя общую статистику, статистику по периодам (неделя/месяц) и детальную информацию по каждому цеху.

## Функциональность

### 1. Общая статистика
- **Всего цехов** - количество цехов под управлением мастера
- **Всего задач** - общее количество задач во всех цехах
- **Выполнено задач** - количество завершенных задач
- **Эффективность** - процент выполнения задач

### 2. Статистика по периодам
- **За неделю** - выполненные задачи, брак, эффективность
- **За месяц** - выполненные задачи, брак, эффективность

### 3. Статистика по цехам
- Детальная информация по каждому цеху:
  - Название и описание
  - Количество сотрудников
  - Общее количество задач
  - Выполненные задачи
  - Количество брака
  - Активные этапы
  - Эффективность (с прогресс-баром)

### 4. Дополнительная статистика
- Общее количество этапов
- Активные этапы
- Завершенные этапы
- Общее количество брака

## Техническая реализация

### Модели
- **Workshop.get_master_statistics()** - основной метод для получения статистики мастера
- Поддерживает как главных мастеров, так и дополнительных мастеров цехов

### API Endpoints
- `GET /workshops/api/master/statistics/` - получение статистики мастера
- `GET /workshops/master/` - страница дашборда мастера

### Представления
- **master_statistics** - API для получения статистики
- **master_dashboard** - основная страница дашборда с автоматическим определением устройства

### Шаблоны
- **master_dashboard.html** - десктопная версия с графиками Chart.js
- **master_dashboard_mobile.html** - мобильная версия с адаптивным дизайном

## Доступ

- Доступ только для пользователей с ролью `master`
- Автоматическое определение мобильного устройства
- Адаптивный дизайн для всех устройств

## Интеграция

### В существующие страницы
- Добавлена кнопка "Мой дашборд" на странице цехов для мастеров
- Добавлена кнопка "Дашборд" в мобильной версии

### Навигация
- Сохранена существующая навигация
- Добавлены ссылки на дашборд мастера

## Использование

1. **Для мастера**: Перейти на `/workshops/master/` или нажать кнопку "Мой дашборд" на странице цехов
2. **Автоматическое определение**: Система автоматически определяет тип устройства и показывает соответствующую версию
3. **Обновление данных**: Кнопка "Обновить" для актуализации статистики

## Требования

- Django 3.2+
- Django REST Framework
- Alpine.js для интерактивности
- Chart.js для графиков (только в десктопной версии)
- Tailwind CSS для стилизации

## Безопасность

- Проверка роли пользователя (только `master`)
- Аутентификация обязательна
- Защита от несанкционированного доступа к статистике

## Расширение

Система легко расширяется для добавления новых метрик:
1. Добавить новые поля в метод `get_master_statistics()`
2. Обновить шаблоны для отображения новых данных
3. Добавить новые API endpoints при необходимости 